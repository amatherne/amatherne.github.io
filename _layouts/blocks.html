<!DOCTYPE html>
<html lang="en">
	{% include head.html %}
	<!-- layouts/blocks -->
	<body>
		<div class="max-width">
			{% include header.html %}
			<div class="bx-wrapper">
				<div class="main-screens">
					{% for section in page.page_sections %}
						{% include block-{{ section.block }}.html %}
					{% endfor %}
				</div>
				{% if page.page_sections.size > 1 %}
					<div class="bx-controls bx-has-pager">
						<div class="bx-pager bx-default-pager" id="bx-pager">
							{% for section in page.page_sections %}
							<div class="bx-pager-item">
								<a href="" data-slide-index="{{ forloop.index0 }}" class="bx-pager-link {% if forloop.first %}active{% endif %}">{% if forloop.index < 10 %}0{% endif %}{{ forloop.index }}</a>
							</div>
							{% endfor %}
						</div>
					</div>
					<script type="text/javascript">
						$(document).ready(function () {
							var	slideContainer = '.main-screens',
								slide = '.section-slide',
								slideActive = 'active-slide';
								screenHeight = $(window).height();
								screenWidth = $(window).width();

							// $(slideContainer+" "+slide).eq(0).addClass(slideActive)
							// console.log('Gaaaame Ooooon')

							if (screenWidth < 768) {
								$(slide).css('height', screenHeight);
							}



							var $slider_nav = $('.bx-pager-link, .bx-controls-direction a');
					  //           $nav = $('.menu-modal');
					  //           $nav_bg = $('.menu_active_bg');
					  //           $links = $('.menu-modal a');

					        var slide_animation = function(e) {
					            // $slider_nav.toggleClass('active');
					            // $nav.toggleClass('active');

					            // e.preventDefault()


					            $(slide).removeClass(slideActive);
							    $(slide).eq(currentSlideHtmlObject).addClass(slideActive)
							    console.log('Slippity Slide.')

					            // Btn Settings
					            var isOpen = $slider_nav.is('.active');
					                
					                // easing = [500, 20],

					                // NavTop = isOpen ? '0%':'-200%',
					                // NavDelay = isOpen ? 0 : 0,
					                // NavDur = isOpen ? 700 : 100,

					                // aTrans = isOpen ? 'transition.leftIn' : 'transition.leftOut',
					                // aStag = isOpen ? 175 : 0,
					                // aDelay = isOpen ? 450 : 0,
					                // aDur = isOpen ? 600 : 100,
					                // aEase = isOpen ? easing : easing,
					                    
					                // ease = isOpen ? easing : easing,
					                // dur = isOpen ?  500 : 200;
					    
					            // Navigation
					            // $nav.velocity({
					            //     top:NavTop
					            // },{
					            //     easing: ease,
					            //     duration:NavDur,
					            //     delay:NavDelay
					            // })

					            // Links
					            $links.velocity(aTrans,{
					                // duration:aDur,
					                // delay:aDelay,
					                // easing:[300, 10],
					                // stagger:aStag
					            })
					        }
					        


					        // $slider_nav.click(slide_animation);

					        $(slideContainer).bxSlider({
								// mode: 'fade',
								infiniteLoop: false,
								touchEnabled: false,
								hideControlOnEnd: true,
								pagerCustom: '#bx-pager',
								onSlideBefore: function slide_animation(){

								},
								onSlideAfter: function (currentSlideNumber, totalSlideQty, currentSlideHtmlObject) {
								    $(slide).removeClass(slideActive);
								    $(slide).eq(currentSlideHtmlObject).addClass(slideActive)
								    console.log('Slippity Slide.')
					        		// $slider_nav.click(slide_animation);
								},
								onSliderLoad: function () {
								    $(slideContainer+" "+slide).eq(0).addClass(slideActive)
								    console.log('Gaaaame Ooooon')
								}
							});


							


							
						})
					</script>
					<style type="text/css">
						.bx-wrapper .bx-loading {
							background: url({{ 'images/bx_loader.gif' | absolute_url }}) center center no-repeat #ffffff;
						}
						.bx-wrapper .bx-prev {
						  	background: url({{ 'images/icon-prev-arrow.svg' | absolute_url }}) no-repeat center;
						}
						.bx-wrapper .bx-next {
						  	background: url({{ 'images/icon-next-arrow.svg' | absolute_url }}) no-repeat center;
						}
					</style>
				{% endif %}
			</div>
			{% include footer.html %}
		</div>
 	</body>
</html>